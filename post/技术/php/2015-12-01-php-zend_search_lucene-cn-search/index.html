<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="generator" content="Hugo 0.121.2">

    

    

    
        
            <meta name="description" content="使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎" />
        

        
            <meta
                name="keywords"
                content="hugo,site,new" />
        

        
            <meta
                name="author"
                content="Jing Wang" />
        

    


    <title>
        
            使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎 |
            My New Hugo Site
        
    </title>

    


    
    

    
    


    
    


    
    


    
    

    


    
    

    

    

        
        


        
        


        <link
            rel="stylesheet"
            href="/css/index_d751713.min.912d03bce61461ecbc3ca083479e1ed814bba94df76d0bdc6aa88fdca33621b9bb410dc2c81af31e8101fec62decfa5f6e48901ad673bc5056d2f1d1f2368a34.css"
            integrity="sha512-kS0DvOYUYey8PKCDR54e2BS7qU33bQvcaqiP3KM2Ibm7QQ3CyBrzHoEB/sYt7PpfbkiQGtZzvFBW0vHR8jaKNA==" />
    


    
    

    

    

    

    
</head>



    <body>
        <header class="header">
    <div class="header_left">
        
    </div>

    <div class="header_middle">
        
            使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎 -
            My New Hugo Site
        
    </div>
</header>



        <main>
            <aside class="sidebar">
    



    
    

    
    


    <ul class="section-tree">
        
            
                <li
                    
                        class="dir opened-dir"
                    >
                    <span class="dir-text"> Posts </span>

                    



    
    

    
    


    <ul class="section-tree">
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-learn-lang-chain/" title="./post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-learn-lang-chain/">
                        
                            手把手教你认识学会LangChain
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-text-to-vec/" title="./post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-text-to-vec/">
                        
                            文本向量化
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2018-05-25-cron-session-log/" title="./post/%E6%8A%80%E6%9C%AF/linux/2018-05-25-cron-session-log/">
                        
                            session opened/closed for user root by (uid=0)
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-07-17-anonymous-function/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-07-17-anonymous-function/">
                        
                            PHP代码之使用匿名函数
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-07-17-use-/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-07-17-use-/">
                        
                            PHP代码之使用引用
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-07-17-interface/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-07-17-interface/">
                        
                            PHP类的接口`interface`
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-06-23-composer-exceeded-time/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-06-23-composer-exceeded-time/">
                        
                            Composer错误：exceeded the timeout of 300 seconds
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-06-13-switch-between-multiple-php-version-on-ubuntu/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-06-13-switch-between-multiple-php-version-on-ubuntu/">
                        
                            Ubuntu上在多个PHP版本之间切换
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2017-04-01-php-recursion-memory-problem/" title="./post/%E6%8A%80%E6%9C%AF/php/2017-04-01-php-recursion-memory-problem/">
                        
                            递归时内存占用问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/mysql/2016-11-22-ubuntu-mysql-connect/" title="./post/%E6%8A%80%E6%9C%AF/mysql/2016-11-22-ubuntu-mysql-connect/">
                        
                            解决Ubuntu远程连接mysql连不上的问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2016-11-01-shell-dos-fault/" title="./post/%E6%8A%80%E6%9C%AF/2016-11-01-shell-dos-fault/">
                        
                            Linux下执行shell提示错误syntax error:unexpected end of file
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2016-09-29-mbp-router-wifi/" title="./post/%E6%8A%80%E6%9C%AF/2016-09-29-mbp-router-wifi/">
                        
                            Macbook pro连接无线路由不稳定掉线的解决办法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-05-11-ajax-cross-domain-with-cookies/" title="./post/%E6%8A%80%E6%9C%AF/2015-05-11-ajax-cross-domain-with-cookies/">
                        
                            Ajax跨域请求带上cookies
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/git/2016-04-14-git-bash-change-initial-directory/" title="./post/%E6%8A%80%E6%9C%AF/git/2016-04-14-git-bash-change-initial-directory/">
                        
                            Git Bash 更改初始目录
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2016-04-14-skype-port-80/" title="./post/%E6%8A%80%E6%9C%AF/2016-04-14-skype-port-80/">
                        
                            Skype打开默认占用80端口问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E8%8D%89%E7%A8%BF/2016-03-30-some-questions-met/" title="./post/%E8%8D%89%E7%A8%BF/2016-03-30-some-questions-met/">
                        
                            面试中遇到的一些问题总结
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E8%8D%89%E7%A8%BF/2016-03-29-svn-git-diff/" title="./post/%E8%8D%89%E7%A8%BF/2016-03-29-svn-git-diff/">
                        
                            svn与git的一些区别
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2016-03-16-memcache/" title="./post/%E6%8A%80%E6%9C%AF/2016-03-16-memcache/">
                        
                            Memcache整理
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2016-03-04-php-encrypt-method/" title="./post/%E6%8A%80%E6%9C%AF/php/2016-03-04-php-encrypt-method/">
                        
                            几种常见的PHP加密算法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E8%8D%89%E7%A8%BF/2016-03-02-dangerously-set-innerhtml/" title="./post/%E8%8D%89%E7%A8%BF/2016-03-02-dangerously-set-innerhtml/">
                        
                            React学习 之 Dangerously Set innerHTML
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/javascript/2016-03-01-useragent-is-weixin-browser/" title="./post/%E6%8A%80%E6%9C%AF/javascript/2016-03-01-useragent-is-weixin-browser/">
                        
                            微信内置浏览器UserAgent的判断
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E8%8D%89%E7%A8%BF/2016-02-29-mac-composer-install-problem/" title="./post/%E8%8D%89%E7%A8%BF/2016-02-29-mac-composer-install-problem/">
                        
                            Mac下安装composer遇到的问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-12-29-shell-check-server/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-12-29-shell-check-server/">
                        
                            自动检测程序正常运行，遇故障则重启服务
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-25-redis&#43;mysql&#43;php-high-concurrence/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-25-redis&#43;mysql&#43;php-high-concurrence/">
                        
                            【高并发简单解决方案】redis队列缓存 &#43; mysql 批量入库 &#43; php离线整合
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-25-php-timing-task/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-25-php-timing-task/">
                        
                            PHP设置定时任务的实现方法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-25-ip-to-address/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-25-ip-to-address/">
                        
                            根据ip查询所在地
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-12-23-preg-start/" title="./post/%E6%8A%80%E6%9C%AF/2015-12-23-preg-start/">
                        
                            正则表达式基础语法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-12-21-awesome-machine-learning/" title="./post/%E6%8A%80%E6%9C%AF/2015-12-21-awesome-machine-learning/">
                        
                            Awesome Machine Learning
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E7%94%9F%E6%B4%BB/2015-12-18-100-years-of-beauty/" title="./post/%E7%94%9F%E6%B4%BB/2015-12-18-100-years-of-beauty/">
                        
                            100 Years of Beauty
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/javascript/2015-12-18-javascript-array-function/" title="./post/%E6%8A%80%E6%9C%AF/javascript/2015-12-18-javascript-array-function/">
                        
                            Javascript各种数组方法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/mysql/2015-12-17-mysql-update-varies-value/" title="./post/%E6%8A%80%E6%9C%AF/mysql/2015-12-17-mysql-update-varies-value/">
                        
                            mysql批量更新多条记录的不同值
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-17-php-files-directory/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-17-php-files-directory/">
                        
                            php获取文件夹下所有文件，包含子文件夹
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-16-php-run-time/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-16-php-run-time/">
                        
                            PHP调试执行时间
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-12-06-win10-pid4-system/" title="./post/%E6%8A%80%E6%9C%AF/2015-12-06-win10-pid4-system/">
                        
                            win10下80端口被PID为4的System占用问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-15-shortcut-save-url/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-15-shortcut-save-url/">
                        
                            收藏到桌面的快捷方式
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/htmlcss/2015-12-10-ui-elements/" title="./post/%E6%8A%80%E6%9C%AF/htmlcss/2015-12-10-ui-elements/">
                        
                            各种常见的UI元素
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/jquery/2014-12-08-jquery-plugin/" title="./post/%E6%8A%80%E6%9C%AF/jquery/2014-12-08-jquery-plugin/">
                        
                            jQuery插件开发笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-12-06-shell-method-terminal/" title="./post/%E6%8A%80%E6%9C%AF/2015-12-06-shell-method-terminal/">
                        
                            执行系统命令的函数
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-12-03-jekyll-template-grammer/" title="./post/%E6%8A%80%E6%9C%AF/2015-12-03-jekyll-template-grammer/">
                        
                            Jekyll模板变量&amp;语法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-03-php-zip-so/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-03-php-zip-so/">
                        
                            测试phpexcel后报错Class &#39;ZipArchive&#39; not found解决方法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/jquery/2015-12-02-jquery-plugin-template/" title="./post/%E6%8A%80%E6%9C%AF/jquery/2015-12-02-jquery-plugin-template/">
                        
                            jQuery插件模板
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-02-memcache/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-02-memcache/">
                        
                            Memcache基本教程
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2014-12-01-one-line-browser-notepad/" title="./post/%E6%8A%80%E6%9C%AF/2014-12-01-one-line-browser-notepad/">
                        
                            一行代码，浏览器变临时编辑器
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-01-php-zend_search_lucene-cn-search/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-12-01-php-zend_search_lucene-cn-search/">
                        
                            使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/mysql/2015-11-26-mysql-rand-n-row/" title="./post/%E6%8A%80%E6%9C%AF/mysql/2015-11-26-mysql-rand-n-row/">
                        
                            从Mysql某一表中随机读取n条数据的SQL查询语句
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-11-19-data-hiding-in-image/" title="./post/%E6%8A%80%E6%9C%AF/2015-11-19-data-hiding-in-image/">
                        
                            用图片隐藏信息的技术实现
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E5%85%B6%E4%BB%96/2015-11-02-all-country-list/" title="./post/%E5%85%B6%E4%BB%96/2015-11-02-all-country-list/">
                        
                            全部国家列表
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E5%85%B6%E4%BB%96/2015-11-02-all-api/" title="./post/%E5%85%B6%E4%BB%96/2015-11-02-all-api/">
                        
                            各种API
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-10-29-curl-login/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-10-29-curl-login/">
                        
                            curl模拟登陆
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-10-27-msvcr100u-dll/" title="./post/%E6%8A%80%E6%9C%AF/2015-10-27-msvcr100u-dll/">
                        
                            如何解决msvcr100.dll丢失问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/jquery/2015-10-21-jquery-little-method/" title="./post/%E6%8A%80%E6%9C%AF/jquery/2015-10-21-jquery-little-method/">
                        
                            常用的jQuery小技巧
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-10-14-php-is-mobile/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-10-14-php-is-mobile/">
                        
                            PHP 判断设备是否是手机/平板的方法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-10-10-simple-factory-mode/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-10-10-simple-factory-mode/">
                        
                            PHP设计模式之简单工厂模式
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-10-10-php-simple-methods/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-10-10-php-simple-methods/">
                        
                            简单实用的PHP函数
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-10-09-firefox-mason/" title="./post/%E6%8A%80%E6%9C%AF/2015-10-09-firefox-mason/">
                        
                            Firefox域名重定向插件——Mason
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-10-09-php-singleton-pattern/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-10-09-php-singleton-pattern/">
                        
                            PHP设计模式之单例模式
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-09-21-phpexcel/" title="./post/%E6%8A%80%E6%9C%AF/php/2015-09-21-phpexcel/">
                        
                            PHPExcel类库的各种使用方法总结
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/laravel/2015-09-01-laravel-build/" title="./post/%E6%8A%80%E6%9C%AF/laravel/2015-09-01-laravel-build/">
                        
                            【laravel学习笔记】一、安装
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/laravel/2015-09-11-laravel-route-controller-view/" title="./post/%E6%8A%80%E6%9C%AF/laravel/2015-09-11-laravel-route-controller-view/">
                        
                            【laravel学习笔记】二、路由、控制器及视图简介
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-09-01-git-do/" title="./post/%E6%8A%80%E6%9C%AF/2015-09-01-git-do/">
                        
                            git常用的一些命令
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-08-31-linux-5/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-08-31-linux-5/">
                        
                            Linux中cp直接覆盖不提示的方法
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/htmlcss/2015-08-20-div-float/" title="./post/%E6%8A%80%E6%9C%AF/htmlcss/2015-08-20-div-float/">
                        
                            解决子级float浮动父级无高度没有自适应问题
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-vi-editor/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-vi-editor/">
                        
                            linux之vi编辑器命令使用
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/bootstrap/2015-03-26-bootstrap/" title="./post/%E6%8A%80%E6%9C%AF/bootstrap/2015-03-26-bootstrap/">
                        
                            bootstrap笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-1/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-1/">
                        
                            linux批量替换字符串
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-2/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-2/">
                        
                            Linux服务器间文件传输
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-tar-zip/" title="./post/%E6%8A%80%E6%9C%AF/linux/2015-03-19-linux-tar-zip/">
                        
                            打包/压缩目录
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-02-28-sublime-text/" title="./post/%E6%8A%80%E6%9C%AF/2015-02-28-sublime-text/">
                        
                            Sublime Text Snippets(代码片段)功能
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/htmlcss/2015-01-01-scroller/" title="./post/%E6%8A%80%E6%9C%AF/htmlcss/2015-01-01-scroller/">
                        
                            自定义滚动条样式
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-01-30-markdown/" title="./post/%E6%8A%80%E6%9C%AF/2015-01-30-markdown/">
                        
                            标准的markdown格式练习
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-01-01-github-blog/" title="./post/%E6%8A%80%E6%9C%AF/2015-01-01-github-blog/">
                        
                            使用Github Pages建独立博客
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/2015-01-01-jekyll/" title="./post/%E6%8A%80%E6%9C%AF/2015-01-01-jekyll/">
                        
                            安装Jekyll
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/htmlcss/2014-01-01-css/" title="./post/%E6%8A%80%E6%9C%AF/htmlcss/2014-01-01-css/">
                        
                            css笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/jquery/2014-01-01-jquery/" title="./post/%E6%8A%80%E6%9C%AF/jquery/2014-01-01-jquery/">
                        
                            jQuery笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/javascript/2014-01-01-js/" title="./post/%E6%8A%80%E6%9C%AF/javascript/2014-01-01-js/">
                        
                            js笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2014-01-01-php/" title="./post/%E6%8A%80%E6%9C%AF/php/2014-01-01-php/">
                        
                            php知识笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/thinkphp/2014-01-01-thinkphp/" title="./post/%E6%8A%80%E6%9C%AF/thinkphp/2014-01-01-thinkphp/">
                        
                            ThinkPHP笔记
                        
                    </a>
                </li>
            
        
            
                <li class="file">
                    <a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/linux/2014-01-01-linux/" title="./post/%E6%8A%80%E6%9C%AF/linux/2014-01-01-linux/">
                        
                            各种常用的Linux操作命令
                        
                    </a>
                </li>
            
        
    </ul>


                </li>
            
        
    </ul>


</aside>
<aside class="exapandable"></aside>


            
    <article class="main">
        <button
    class="sidebar-toggle-btn"
    type="menu"
    aria-expanded="false"
    aria-haspopup="true">
    <i class="bi bi-list"></i>
</button>



        <div class="title">
            <h1 class="title-header">
                使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎
            </h1>

            <div class="author-date-readtime">
                

                    
                        <div class="author" title="Author">
                            <i class="bi bi-person"></i>
                            <a
                                href="/author/jing-wang/"
                                class="cat-btn">
                                Jing Wang
                            </a>
                        </div>
                    

                

                
                    <div class="date" title="Date">
                        <i class="bi bi-calendar3"></i>
                        <time
                            datetime="2015.12.01"
                            >2015.12.01
                        </time>
                    </div>
                

                
                    <div
                        class="readtime"
                        title="Time to Read">
                        <i class="bi bi-clock"></i>
                        3 mins to read
                    </div>
                
            </div>
        </div>

        <div class="article-meta">
            
                <div class="categories">
                    <i
                        class="bi bi-bookmarks"
                        title="Categories"></i>
                    
                        <a
                            href="/categories/php/"
                            class="cat-btn">
                            PHP
                        </a>
                    
                </div>
            

            
                <div class="tags">
                    <i
                        class="bi bi-tags"
                        title="Tags"></i>
                    
                        <a
                            href="/tags/zend_search_lucene/"
                            class="tag-btn">
                            Zend_Search_Lucene
                        </a>
                    
                        <a
                            href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"
                            class="tag-btn">
                            搜索引擎
                        </a>
                    
                        <a
                            href="/tags/blog/"
                            class="tag-btn">
                            Blog
                        </a>
                    
                </div>
            

            
                <div class="breadcumb">
                    <i class="bi bi-folder"></i>
                    
    
    




<a href="https://gongvirgil.github.io/" class="bread-btn">
    
        <i class="bi bi-house-fill"></i>
    

    
        Home
    
</a>




    /



<a href="https://gongvirgil.github.io/post/" class="bread-btn">
    

    
        Posts
    
</a>




    /



<a href="https://gongvirgil.github.io/post/%E6%8A%80%E6%9C%AF/php/2015-12-01-php-zend_search_lucene-cn-search/" class="bread-btn">
    

    
        
            使用PHP&#43;Zend_Search_Lucene做全站中文搜索引擎
        

    
</a>

                </div>
            

            
        </div>

        
            <nav id="TableOfContents">
  <ul>
    <li><a href="#1概述">1.概述</a></li>
    <li><a href="#2-安装zend_lucene">2. 安装Zend_Lucene</a></li>
    <li><a href="#3创建索引">3.创建索引</a></li>
    <li><a href="#4搜索索引数据">4.搜索索引数据</a></li>
    <li><a href="#5删除及更新索引">5.删除及更新索引</a></li>
    <li><a href="#6搜索中文索引">6.搜索中文索引</a></li>
  </ul>
</nav>
        


        <div class="content">
            
                <h2 id="1概述">1.概述</h2>
<p>Zend_Search_Lucene是一个完全基于PHP5的通用文本搜索引擎，它将索引存储在文件系统中，不需要数据库服务器。</p>
<h2 id="2-安装zend_lucene">2. 安装Zend_Lucene</h2>
<p>可以从这里下载:     <a href="http://www.zend.com/community/downloads">http://www.zend.com/community/downloads</a></p>
<p>也可以参考这篇文章：<a href="http://nonfu.me/p/4650.html">http://nonfu.me/p/4650.html</a> 的下载目录去下载Zend Framework导入。</p>
<p>找到Zend文件夹下的Search目录，所需要的文件都在里面了。</p>
<!-- raw HTML omitted -->
<h2 id="3创建索引">3.创建索引</h2>
<p>下面是创建索引的示例:</p>
<pre><code>&lt;?php
    require_once 'Zend/Search/Lucene.php';
    $articlesData = array(
        0=&gt;array('id'=&gt;1,'title'=&gt;'test','content'=&gt;'this is a test'),
        1=&gt;array('id'=&gt;2,'title'=&gt;'test php','content'=&gt;'this is a php test'),
        2=&gt;array('id'=&gt;3,'title'=&gt;'test yii','content'=&gt;'this is a yii test'),
        3=&gt;array('id'=&gt;4,'title'=&gt;'test lucene','content'=&gt;'this is a lucene test'),
        4=&gt;array('id'=&gt;5,'title'=&gt;'测试','content'=&gt;'这是一个简单的搜索测试'),
        5=&gt;array('id'=&gt;6,'title'=&gt;'测一个小试','content'=&gt;'我们进行一个小测验吧'),
        6=&gt;array('id'=&gt;6,'title'=&gt;'白色的马','content'=&gt;'白色的小马驹')
    );
    $index = new Zend_Search_Lucene('/path/to/index',true);
    $doc = new Zend_Search_Lucene_Document();
    foreach ($articlesData as $article) {
        $doc-&gt;addField(Zend_Search_Lucene_Field::keyword('id',$article['id'],'UTF-8'));
        $doc-&gt;addField(Zend_Search_Lucene_Field::Text('title',$article['title'],'UTF-8'));
        $doc-&gt;addField(Zend_Search_Lucene_Field::keyword('content',$article['content'],'UTF-8'));
        $index-&gt;addDocument($doc);
        $index-&gt;commit();
        $index-&gt;optimize();
    }
    echo '索引创建成功！';
</code></pre>
<p>在实际案例中，索引数据应该来自数据库，在上面的示例中，我们的所有索引数据都可以用数据库查询的结果来替代。</p>
<h2 id="4搜索索引数据">4.搜索索引数据</h2>
<p>创建索引之后我们就可以通过下面的代码来搜索了:</p>
<pre><code>$index = new Zend_Search_Lucene('/path/to/index');
$keywords = &quot;test&quot;;
//echo &quot;Index包含{$index-&gt;count()}条结果&lt;br&gt;&quot;;
$query = Zend_Search_Lucene_Search_QueryParser::parse($keywords,'utf-8');
$hits = $index-&gt;find($query);
foreach($hits as $hit){
    echo $hit-&gt;id.'.';
    echo $hit-&gt;title.'&lt;br&gt;';
    echo $hit-&gt;content;
    echo &quot;&lt;br&gt;&lt;br&gt;&quot;;
}
</code></pre>
<p>如果你想要支持多语言的文本搜索，我们可以设置属性lan的值，然后通过lan来显示不同语言的文本搜索结果。</p>
<h2 id="5删除及更新索引">5.删除及更新索引</h2>
<p>如果你想要更新索引，首先我们必须通过keywords找到索引所在的位置，然后删除它，之后我们需要添加一个新的文档，下面是一个更新索引的示例代码，我们删除PID为1的产品并且更新描述信息.</p>
<pre><code>&lt;?php

    require_once('Zend/Search/Lucene.php');
    $index = new Zend_Search_Lucene('index');

    //需要被更新的新数据
    $productNewData =array(
        &quot;PID&quot;=&gt;1,
        &quot;url&quot;=&gt;&quot;http://nonfu.me&quot;,
        &quot;productName&quot;=&gt;&quot;icultivator&quot;,
        &quot;Description&quot;=&gt;&quot;update icultivator Description&quot;,
        &quot;lan&quot;=&gt;&quot;en&quot;);

    $keywords=&quot;PID:1&quot;;

    $hits = $index-&gt;find($keywords);

    //删除PID:1的索引
    foreach ($hits as $hit)
    {
        echo 'PID: '.$hit-&gt;PID .'has been deleted &lt;br&gt;';
        $index-&gt;delete($hit-&gt;id);
    }

    $index-&gt;commit();

    //添加新数据到索引
    $doc = new Zend_Search_Lucene_Document();
    $doc-&gt;addField(Zend_Search_Lucene_Field::keyword('PID', $productNewData['PID'], 'UTF-8'));
    $doc-&gt;addField(Zend_Search_Lucene_Field::Text('url', $productNewData['url'], 'UTF-8'));
    $doc-&gt;addField(Zend_Search_Lucene_Field::Text('productName', $productNewData['productName'], 'UTF-8'));
    $doc-&gt;addField(Zend_Search_Lucene_Field::Text('Description', $productNewData['Description'], 'UTF-8'));
    $doc-&gt;addField(Zend_Search_Lucene_Field::unIndexed('lan', $productNewData['lan'], 'UTF-8'));
    $index-&gt;addDocument($doc);
    $index-&gt;commit();
    $index-&gt;optimize();
</code></pre>
<h2 id="6搜索中文索引">6.搜索中文索引</h2>
<p>默认情况下，lucene 只支持英文文本搜索，但是在本项目中，我们需要搜素英文及中文的文本，因此我们必须要改变Lucene的默认分析器。</p>
<p>下面的代码是Lucene默认分析器的扩展:</p>
<pre><code>&lt;?php

//文件名称:chinese.php
require_once 'Zend/Search/Lucene/Analysis/Analyzer.php';
require_once 'Zend/Search/Lucene/Analysis/Analyzer/Common.php';
class CN_Lucene_Analyzer extends Zend_Search_Lucene_Analysis_Analyzer_Common
{
    private $_position;
    private $_cnStopWords = array( );

    public function setCnStopWords( $cnStopWords )
    { 
        $this-&gt;_cnStopWords = $cnStopWords;
    }

    /**
     * Reset token stream
     */
    public function reset()
    {
        $this-&gt;_position = 0;
        $search = array(&quot;,&quot;, &quot;/&quot;, &quot;\\&quot;, &quot;.&quot;, &quot;;&quot;, &quot;:&quot;, &quot;\&quot;&quot;, &quot;!&quot;, &quot;~&quot;, &quot;`&quot;, &quot;^&quot;, &quot;(&quot;, &quot;)&quot;, &quot;?&quot;, &quot;-&quot;, &quot;'&quot;, &quot;&lt;&quot;, &quot;&gt;&quot;, &quot;$&quot;, &quot;&amp;&quot;, &quot;%&quot;, &quot;#&quot;, &quot;@&quot;, &quot;+&quot;,&quot;=&quot;, &quot;{&quot;, &quot;}&quot;, &quot;[&quot;, &quot;]&quot;, &quot;：&quot;, &quot;）&quot;, &quot;（&quot;, &quot;．&quot;, &quot;。&quot;, &quot;，&quot;, &quot;！&quot;, &quot;；&quot;, &quot;“&quot;, &quot;”&quot;, &quot;‘&quot;, &quot;’&quot;, &quot;［&quot;, &quot;］&quot;, &quot;、&quot;, &quot;—&quot;, &quot;　&quot;, &quot;《&quot;, &quot;》&quot;, &quot;－&quot;, &quot;…&quot;, &quot;【&quot;,&quot;】&quot;, &quot;？&quot;, &quot;￥&quot; );

        $this-&gt;_input = str_replace( $search, '', $this-&gt;_input );
        $this-&gt;_input = str_replace( $this-&gt;_cnStopWords, ' ', $this-&gt;_input );
    }

    /**
     * Tokenization stream API
     * Get next token
     * Returns null at the end of stream
     *
     * @return Zend_Search_Lucene_Analysis_Token|null
     */
    public function nextToken()
    {
        if ($this-&gt;_input === null)
        {
            return null;
        }
        $len = strlen($this-&gt;_input);
        //print &quot;Old string：&quot;.$this-&gt;_input.&quot;&lt;br /&gt;&quot;;
        while ($this-&gt;_position &lt; $len)
        {
            // Delete space at the begining
            while ($this-&gt;_position &lt; $len &amp;&amp;$this-&gt;_input[$this-&gt;_position]==' ' )
            {
                $this-&gt;_position++;
            }

            $termStartPosition = $this-&gt;_position;
            $temp_char = $this-&gt;_input[$this-&gt;_position];
            $isCnWord = false;

            if(ord($temp_char)&gt;127)
            {
               $i = 0;
               while( $this-&gt;_position &lt; $len &amp;&amp; ord( $this-&gt;_input[$this-&gt;_position] )&gt;127 )
               {
                   $this-&gt;_position = $this-&gt;_position + 3;
                   $i ++;
                   if($i==2)
                   {
                       $isCnWord = true;
                       break;
                   }
               }

               if($i==1) continue;
            }
            else{
               while ($this-&gt;_position &lt; $len &amp;&amp; ctype_alnum( $this-&gt;_input[$this-&gt;_position] ))
               {
                  $this-&gt;_position++;
               }

               //echo $this-&gt;_position.&quot;:&quot;.$this-&gt;_input[$this-&gt;_position-1].&quot;\n&quot;;
            }

           if ($this-&gt;_position == $termStartPosition)
           {
               $this-&gt;_position++;
               continue;
           }

           $tmp_str = substr($this-&gt;_input, $termStartPosition, $this-&gt;_position - $termStartPosition);
           $token = new Zend_Search_Lucene_Analysis_Token( $tmp_str, $termStartPosition,$this-&gt;_position );
           $token = $this-&gt;normalize($token);

           if($isCnWord)
           {
              $this-&gt;_position = $this-&gt;_position - 3;
           }

           if ($token !== null)
           {
              return $token;
           }
        }

       return null;
    }
}
</code></pre>
<p>在chinese.php的帮助下我们就可以在项目中进行中文搜索了。而且我们必须要在上述代码中添加如下两行代码.</p>
<p>require_once &lsquo;chinese.php&rsquo;;
Zend_Search_Lucene_Analysis_Analyzer::setDefault(new CN_Lucene_Analyzer());</p>
<p>即：</p>
<p>zen_lucene</p>
<p>修改上述搜素文本代码中的搜索文本即可进行中文搜索了，不过我感觉其中文分词效果并不是很好。</p>

            
        </div>
    </article>

        </main>

        <footer class="footer">
    <div class="footer-left">
        <ul class="social">
            
                <li>All Rights Reserved ®.</li>
            

            
                <li>Jing Wang</li>
            

            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        </ul>
    </div>

    <div class="footer-right">
        <ul class="control status clearfix">
            
                <li>
                    
                        Word Count:
                        448
                    
                </li>
            

            
            

            
                <li>en</li>
            

            
                <li>
                    <a href="https://gohugo.io" class="btn" target="_blank"
                        >Hugo: 0.121.2</a
                    >
                </li>
            

            
                <li>
                    <a
                        href="https://github.com/JingWangTW/dark-theme-editor"
                        class="btn"
                        target="_blank"
                        >Theme: dark-theme-editor</a
                    >
                </li>
            

            
                <li>
                    
                        Last modified: &nbsp;
                        <time>
                            Dec 01 2015 00:00:00
                        </time>
                    
                </li>
            

            
                <li title="">
                    
                </li>
            
        </ul>
    </div>
</footer>

    </body>

    























    
    


    
    


    <script
        type="text/javascript"
        src="/js/index_d751713.min.5eeb120f16ea146352725c420364f87befead45f678142b8f0ffbef024646931fbc06bff07a7bd6cb57fa2f8cd8a21ba6a4ee5a278ec32303a378bc1cd17f246.js"
        integrity="sha512-XusSDxbqFGNSclxCA2T4e&#43;/q1F9ngUK48P&#43;&#43;8CRkaTH7wGv/B6e9bLV/ovjNiiG6ak7lonjsMjA6N4vBzRfyRg=="></script>














<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />




</html>
